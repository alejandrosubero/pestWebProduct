import{a as Q}from"./chunk-NS24V2YC.js";import{a as K}from"./chunk-BRWND255.js";import{d as G,g as J}from"./chunk-5H3PVSA5.js";import"./chunk-MIQOVXXK.js";import{a as L,b as H,c as $,d as V,f as q}from"./chunk-EPDRRMG5.js";import{E as z,q as E,s as O,t as j}from"./chunk-BTVDTH6N.js";import{a as k,c as w,f as x,g as y,i as T,ka as N,la as R,ma as U,na as B,oa as A,pa as W}from"./chunk-FFY7M2LJ.js";import"./chunk-CARY4E7O.js";import{Db as m,Dc as F,Fb as u,Nb as s,Ob as p,Pb as v,Ua as c,Va as r,Wb as P,Xb as I,ja as h,kb as g,mb as _,rb as b,sb as C,tb as S,ub as M,vb as i,vc as D,wb as o,xb as d}from"./chunk-VZZX6ACQ.js";var et=a=>({highlight:a});function it(a,f){if(a&1&&(i(0,"li",8),s(1),o()),a&2){let t=f.$implicit,n=u(2);_("ngClass",I(2,et,t.toLowerCase()===n.pestData.name.toLowerCase())),c(),v(" ",t," ")}}function nt(a,f){if(a&1&&(i(0,"mat-card-title"),s(1),o(),i(2,"mat-card-subtitle"),s(3),o(),i(4,"mat-card-content")(5,"p")(6,"strong"),s(7,"Application/Treatment:"),o()(),i(8,"p"),s(9),o(),i(10,"p")(11,"strong"),s(12,"Pests Controlled:"),o()(),i(13,"ul"),S(14,it,2,4,"li",8,C),o()()),a&2){let t=u();c(),p(t.product.name),c(2),v(" Active Ingredient: ",t.product.activeIngredients," "),c(6),p(t.product.applicationTreatment),c(5),M(t.product.pestsControlled)}}var Ft=(()=>{class a{constructor(t,n,e,l,X,Y,Z,tt){this.route=t,this.router=n,this.http=e,this.favService=l,this.productService=X,this.navegateService=Y,this.matIconRegistry=Z,this.domSanitizer=tt,this.product=null,this.isFav=!1,this.pestData={id:0,name:""},this.id=0,this.configUrl="assets/config/products.json",this.nameToNavegate="",this.oneProduct={id:0,name:"",activeIngredients:"",applicationTreatment:"",pestsControlled:[],url1:"",url2:""},this.matIconRegistry.addSvgIcon("sds",this.domSanitizer.bypassSecurityTrustResourceUrl("assets/icons/sds.svg")),this.matIconRegistry.addSvgIcon("label",this.domSanitizer.bypassSecurityTrustResourceUrl("assets/icons/label.svg")),this.getData()}getData(){let t=this.router.getCurrentNavigation();this.pestData=t?.extras?.state?.data||history.state.data||null,this.pestData?(this.id=this.pestData.id,this.nameToNavegate=this.pestData.name!=null&&this.pestData.name!=null?this.pestData.name:""):console.warn("No pestData passed, fetching by ID or redirecting...")}ngOnInit(){let t=this.productService.products();t!=null&&t!=null&&t.length>0&&this.checkProduct(t,this.id)}checkProduct(t,n){let e=t.find(l=>l.id===n);e?(this.product=e,this.oneProduct=e):console.error("Producto no encontrado con id:",n),this.product?this.isFav=this.favService.isFavorite(this.id):this.router.navigate(["/home"])}back(){this.nameToNavegate==="favorites"?this.goFavorites():this.router.navigate(["/home"])}toggleFavorite(){this.isFav?this.favService.removeFromFavorites(this.product.id):this.favService.addToFavorites(this.product),this.isFav=!this.isFav}goFavorites(){this.navegateService.goFavorites("favorites",1)}viewPdf(){window.open(this.oneProduct.url1,"_blank")}viewSdS(){window.open(this.oneProduct.url2,"_blank")}downloadPdf(){let t=this.oneProduct.url1,n=`${new Date}.pdf`,e=document.createElement("a");e.href=t,e.download=n,e.click(),e.remove()}static{this.\u0275fac=function(n){return new(n||a)(r(y),r(T),r(k),r(Q),r(K),r(W),r(U),r(x))}}static{this.\u0275cmp=h({type:a,selectors:[["app-product-detail"]],standalone:!0,features:[P],decls:16,vars:2,consts:[["color","primary",1,"toolbar","mobile-toolbar"],["mat-icon-button","","aria-label","Back",3,"click"],[1,"spacer"],["mat-icon-button","","aria-label","View PDF",3,"click"],["svgIcon","label"],["mat-icon-button","","aria-label","Download Pdf",3,"click"],["svgIcon","sds"],["mat-icon-button","","matTooltip","Favorites","aria-label","Favorites",3,"click"],[3,"ngClass"]],template:function(n,e){n&1&&(i(0,"mat-toolbar",0)(1,"button",1),m("click",function(){return e.back()}),i(2,"mat-icon"),s(3,"arrow_back"),o()(),d(4,"span",2),i(5,"button",3),m("click",function(){return e.viewPdf()}),d(6,"mat-icon",4),o(),d(7,"span",2),i(8,"button",5),m("click",function(){return e.viewSdS()}),d(9,"mat-icon",6),o(),d(10,"span",2),i(11,"button",7),m("click",function(){return e.toggleFavorite()}),i(12,"mat-icon"),s(13),o()()(),i(14,"mat-card"),g(15,nt,16,3),o()),n&2&&(c(13),p(e.isFav?"star":"star_border"),c(2),b(15,e.product?15:-1))},dependencies:[F,D,w,E,j,O,R,N,z,A,B,q,L,$,V,H,G,J],styles:['@charset "UTF-8";mat-card[_ngcontent-%COMP%]{width:90%;max-width:600px;margin:2rem auto;padding:1rem}mat-card-title[_ngcontent-%COMP%]{font-size:1.5rem}mat-card-subtitle[_ngcontent-%COMP%]{margin-bottom:1rem}ul[_ngcontent-%COMP%]{padding-left:1.2rem;list-style-type:disc}button[_ngcontent-%COMP%]{margin-top:1rem}.highlight[_ngcontent-%COMP%]{color:#00f;font-weight:700}.toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:0 8px}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}.fav-button[_ngcontent-%COMP%]{background:transparent!important;font-weight:500;text-transform:none}.fav-button.add[_ngcontent-%COMP%], .fav-button.remove[_ngcontent-%COMP%]{color:#fff}']})}}return a})();export{Ft as ProductDetailComponent};
